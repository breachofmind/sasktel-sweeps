<% include ../common/head.ejs %>

<main class="container">
    <h1>Admin</h1>

    <p>Welcome <%= request.user.first_name; %></p>
    <a href="/logout">Logout</a>

    <div id="AdminTable" class="table-area" ng-controller="adminCtrl" ng-class="{loading:loading}">

        <table class="table table-hover">
            <thead>
            <tr>
                <th class="td-small">Accept</th>
                <th>Submitted Date</th>
                <th>Sale Date</th>
                <th>Type</th>
                <th>Customer Name</th>
                <th class="td-small"><!-- Actions --></th>
            </tr>
            </thead>

            <tbody>

                <tr ng-repeat="item in submissions" class="table-item" ng-class="{pending:item.pending, accepted:item.accepted, 'not-accepted':!item.accepted && !item.pending}">
                    <td class="td-small">
                        <div class="custom-controls">
                            <input type="radio" id="rb1{{item._id}}" name="rb{{item._id}}" ng-value="false" ng-model="item.accepted" ng-change="itemAccept(item)">
                            <label for="rb1{{item._id}}" class="radio-null"><i class="mico">thumb_down</i></label>

                            <input type="radio" id="rb2{{item._id}}" name="rb{{item._id}}" ng-value="true" ng-model="item.accepted" ng-change="itemAccept(item)">
                            <label for="rb2{{item._id}}" class="radio-true"><i class="mico">thumb_up</i></label>
                        </div>
                    </td>
                    <td>{{item.created_at}}</td>
                    <td>{{item.sale_date}}</td>
                    <td>{{item.type}}</td>
                    <td>{{item.customer_name}}</td>
                    <td class="td-small"><i class="mico link" ng-click="toggleItem(item)">add_box</i></td>
                </tr>
            </tbody>
        </table>
        <div class="table-message" ng-show="!submissions.length && !loading">
            <div class="alert alert-info">
                <p>No submissions yet...</p>
            </div>
        </div>
        <i class="mico loader">cached</i>
    </div>

</main>


<% include ../common/footer.ejs %>